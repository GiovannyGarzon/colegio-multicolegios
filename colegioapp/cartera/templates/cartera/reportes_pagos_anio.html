{% extends "colegioapp/base.html" %}
{% load humanize %}

{% block title %}Reporte: Pagos por Año | Cartera{% endblock %}

{% block content %}
<main>
  <h2>Pagos por Año Económico</h2>

  <h3 style="margin-top:10px;">Totales por Año</h3>
  <table style="width:600px; margin:10px auto; border-collapse:collapse; background:#fff;">
    <thead style="background:#e0f2f1;">
      <tr><th style="padding:10px; text-align:left;">Año</th><th style="padding:10px; text-align:right;">Total</th></tr>
    </thead>
    <tbody>
      {% for r in totales_anio %}
      <tr style="border-top:1px solid #eceff1;">
        <td style="padding:8px 10px;">{{ r.anio }}</td>
        <td style="padding:8px 10px; text-align:right;">${{ r.total|floatformat:0|intcomma }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="2" style="padding:10px; text-align:center;">Sin datos</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <h3 style="margin-top:20px;">Totales por Año y Concepto</h3>
  <table style="width:800px; margin:10px auto; border-collapse:collapse; background:#fff;">
    <thead style="background:#e0f2f1;">
      <tr>
        <th style="padding:10px; text-align:left;">Año</th>
        <th style="padding:10px; text-align:left;">Concepto</th>
        <th style="padding:10px; text-align:right;">Total</th>
      </tr>
    </thead>
    <tbody>
      {% for r in totales_anio_concepto %}
      <tr style="border-top:1px solid #eceff1;">
        <td style="padding:8px 10px;">{{ r.anio }}</td>
        <td style="padding:8px 10px;">{{ r.concepto }}</td>
        <td style="padding:8px 10px; text-align:right;">${{ r.total|floatformat:0|intcomma }}</td>
      </tr>
      {% empty %}
      <tr><td colspan="3" style="padding:10px; text-align:center;">Sin datos</td></tr>
      {% endfor %}
    </tbody>
  </table>

  <div style="text-align:center; margin-top:16px;">
    <a href="{% url 'cartera:reportes' %}" style="padding:10px 16px; background:#004d40; color:#fff; text-decoration:none; border-radius:8px;">⬅ Volver a Reportes</a>
  </div>
</main>
{% endblock content %}