{% extends "colegioapp/base.html" %}
{% load roles %}
{% block title %}Gestión Académica Avanzada | CEI GIN GABY{% endblock %}

{% block content %}
<main>
  <h2>Gestión Académica Avanzada</h2>
  <p>
    Desde este panel podrás acceder a las herramientas académicas según tu rol en la institución.
  </p>

  {# ================= NAV SUPERIOR ================= #}
  <nav style="display:flex;justify-content:center;gap:12px;flex-wrap:wrap;margin:16px 0;">

    {# 1) SUPERUSUARIO / STAFF / RECTOR: ven todo #}
    {% if user.is_superuser or user.is_staff or user|has_group:"Rector" %}
      <a href="{% url 'academico:asignaturas' %}" class="btn">Asignaturas (Catálogo)</a>
      <a href="{% url 'academico:ofertas' %}" class="btn">Oferta por curso/año</a>
      <a href="{% url 'academico:periodos' %}" class="btn">Periodos del año</a>
      <a href="{% url 'academico:notas_selector' %}" class="btn">Captura de notas</a>
      <a href="{% url 'academico:boletin_selector' %}" class="btn">Boletines</a>
      <a href="{% url 'academico:asistencia_selector' %}" class="btn">Asistencia (pase de lista)</a>
      <a href="{% url 'academico:anios_lectivos' %}" class="btn">Años lectivos</a>

    {# 2) COORDINADOR / DOCENTE: solo 4 opciones #}
    {% elif user|has_group:"Coordinador" or user|has_group:"Docente" %}
      <a href="{% url 'academico:periodos' %}" class="btn">Periodos del año</a>
      <a href="{% url 'academico:notas_selector' %}" class="btn">Captura de notas</a>
      <a href="{% url 'academico:boletin_selector' %}" class="btn">Boletines</a>
      <a href="{% url 'academico:asistencia_selector' %}" class="btn">Asistencia (pase de lista)</a>

    {# 3) ESTUDIANTE: solo boletines (portal) #}
    {% elif user|has_group:"Estudiante" %}
      <a href="{% url 'academico:portal_boletin' %}" class="btn">Boletines</a>
    {% endif %}

  </nav>

  {# ================= SECCIONES / TARJETAS ================= #}
  <section class="banner-mision-vision">
    <div class="container">

      {# 1) ADMIN / STAFF / RECTOR: TODAS LAS TARJETAS #}
      {% if user.is_superuser or user.is_staff or user|has_group:"Rector" %}
        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:asignaturas' %}" style="text-decoration:none; color:#00796B;">
              Asignaturas (Catálogo)
            </a>
          </h3>
          <p>Lista global de materias (Matemáticas, Lengua…). No dependen del curso ni del año.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:ofertas' %}" style="text-decoration:none; color:#00796B;">
              Oferta académica por curso y año
            </a>
          </h3>
          <p>Configura qué asignaturas ve cada curso en cada año lectivo y qué docente las imparte.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:periodos' %}" style="text-decoration:none; color:#00796B;">
              Periodos y logros
            </a>
          </h3>
          <p>Define los periodos del año y los logros con su peso por curso, asignatura y periodo.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:notas_selector' %}" style="text-decoration:none; color:#00796B;">
              Captura de notas
            </a>
          </h3>
          <p>Registra calificaciones por logro y periodo para los estudiantes de cada curso.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:boletin_selector' %}" style="text-decoration:none; color:#00796B;">
              Boletines
            </a>
          </h3>
          <p>Genera boletines por estudiante con promedios por periodo y promedio anual.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:asistencia_selector' %}" style="text-decoration:none; color:#00796B;">
              Asistencia (pase de lista)
            </a>
          </h3>
          <p>Registra la asistencia diaria de cada curso (presentes, ausentes, tardanzas y justificadas).</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:anios_lectivos' %}" style="text-decoration:none; color:#00796B;">
              Años lectivos
            </a>
          </h3>
          <p>Crea y administra los años lectivos activos (fechas, nombre, estado activo/inactivo).</p>
        </div>

      {# 2) COORDINADOR / DOCENTE: SOLO 4 TARJETAS #}
      {% elif user|has_group:"Coordinador" or user|has_group:"Docente" %}
        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:periodos' %}" style="text-decoration:none; color:#00796B;">
              Periodos del año
            </a>
          </h3>
          <p>Consulta la estructura de periodos y los logros definidos por curso y asignatura.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:notas_selector' %}" style="text-decoration:none; color:#00796B;">
              Captura de notas
            </a>
          </h3>
          <p>Ingresa y edita las notas de tus estudiantes por logro y periodo.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:boletin_selector' %}" style="text-decoration:none; color:#00796B;">
              Boletines
            </a>
          </h3>
          <p>Genera boletines por curso o por estudiante con sus promedios y observaciones.</p>
        </div>

        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:asistencia_selector' %}" style="text-decoration:none; color:#00796B;">
              Asistencia (pase de lista)
            </a>
          </h3>
          <p>Registra asistencia y tardanzas para llevar el seguimiento de cada curso.</p>
        </div>

      {# 3) ESTUDIANTE: SOLO BOLETINES #}
      {% elif user|has_group:"Estudiante" %}
        <div class="banner-item">
          <h3>
            <a href="{% url 'academico:portal_boletin' %}" style="text-decoration:none; color:#00796B;">
              Mis boletines
            </a>
          </h3>
          <p>
            Consulta tus calificaciones por periodo y descarga tu boletín en PDF,
            siempre que no tengas bloqueos por cartera.
          </p>
        </div>
      {% endif %}

    </div>
  </section>

  <div style="display:flex;justify-content:center;margin-top:18px;">
    <a href="{% url 'academico:home' %}" class="btn-sec">← Volver a Académico</a>
  </div>
</main>

<style>
  .btn{
    text-decoration:none;
    background:#004d40;
    color:#fff;
    padding:10px 16px;
    border-radius:10px;
  }
  .btn-sec{
    text-decoration:none;
    background:#9e9e9e;
    color:#fff;
    padding:10px 16px;
    border-radius:10px;
  }
</style>
{% endblock %}