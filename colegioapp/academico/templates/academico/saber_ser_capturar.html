{% extends "colegioapp/base.html" %}
{% block title %}Saber Ser | CEI GIN GABY{% endblock %}

{% block content %}
<main>
  <h2>Saber Ser</h2>

  <!-- Encabezado -->
  <div style="
      max-width:1100px;
      margin:0 auto 16px;
      background:#ffffff;
      border-radius:12px;
      box-shadow:0 4px 12px rgba(0,0,0,0.06);
      padding:16px 20px;
  ">
    <p style="margin:0 0 6px 0;">
      <strong>Asignatura:</strong> {{ oferta.asignatura.nombre }}
      &nbsp;•&nbsp;
      <strong>Curso:</strong> {{ oferta.curso.grado }} - {{ oferta.curso.nombre }}
      &nbsp;•&nbsp;
      <strong>Periodo:</strong> {{ periodo.nombre }}
    </p>

    <p style="margin:0;color:#546e7a;font-size:0.95rem;">
      Registra la valoración de <strong>Saber Ser</strong>
      (comportamiento, responsabilidad, autoevaluación)
      en una escala de <strong>0.00 a 5.00</strong>.
      La nota final usada en los cálculos será el promedio de estas tres dimensiones.
    </p>
  </div>

  <form method="post" style="max-width:1100px;margin:0 auto;">
    {% csrf_token %}

    <div style="
        overflow-x:auto;
        background:#ffffff;
        border-radius:12px;
        box-shadow:0 4px 12px rgba(0,0,0,0.06);
    ">
      <table style="width:100%;border-collapse:collapse;">
        <thead style="background:#e0f2f1;">
          <tr>
            <th style="padding:12px;text-align:left;white-space:nowrap;">Estudiante</th>
            <th style="padding:12px;text-align:center;min-width:110px;">Comportamiento</th>
            <th style="padding:12px;text-align:center;min-width:110px;">Responsabilidad</th>
            <th style="padding:12px;text-align:center;min-width:110px;">Autoevaluación</th>
          </tr>
        </thead>
        <tbody>
          {% for e in estudiantes %}
          <tr style="border-top:1px solid #eceff1;">
            <td style="padding:10px 12px;white-space:nowrap;">
              {{ e.apellidos }} {{ e.nombres }}
            </td>

            <td style="padding:8px 10px;text-align:center;">
              <input
                type="number"
                step="0.01"
                min="0"
                max="5"
                name="comp_{{ e.id }}"
                value="{% if e.nota_comportamiento != None %}{{ e.nota_comportamiento|floatformat:'2' }}{% endif %}"
                style="width:90px;padding:6px;border:1px solid #cfd8dc;border-radius:8px;text-align:center;"
              >
            </td>

            <td style="padding:8px 10px;text-align:center;">
              <input
                type="number"
                step="0.01"
                min="0"
                max="5"
                name="resp_{{ e.id }}"
                value="{% if e.nota_responsabilidad != None %}{{ e.nota_responsabilidad|floatformat:'2' }}{% endif %}"
                style="width:90px;padding:6px;border:1px solid #cfd8dc;border-radius:8px;text-align:center;"
              >
            </td>

            <td style="padding:8px 10px;text-align:center;">
              <input
                type="number"
                step="0.01"
                min="0"
                max="5"
                name="auto_{{ e.id }}"
                value="{% if e.nota_autoevaluacion != None %}{{ e.nota_autoevaluacion|floatformat:'2' }}{% endif %}"
                style="width:90px;padding:6px;border:1px solid #cfd8dc;border-radius:8px;text-align:center;"
              >
            </td>
          </tr>
          {% empty %}
          <tr>
            <td colspan="4" style="padding:16px;text-align:center;color:#607d8b;">
              No hay estudiantes matriculados en este curso.
            </td>
          </tr>
          {% endfor %}
        </tbody>
      </table>
    </div>

    <div style="display:flex;justify-content:space-between;margin-top:14px;">
      <a href="{% url 'academico:notas_selector' %}"
         style="padding:10px 16px;background:#9e9e9e;color:#fff;border-radius:8px;text-decoration:none;">
        ← Volver al selector de notas
      </a>

      <button type="submit"
              style="padding:10px 16px;background:#00796B;color:#fff;border:none;border-radius:8px;cursor:pointer;">
        Guardar notas de Saber Ser
      </button>
    </div>
  </form>
</main>
{% endblock %}